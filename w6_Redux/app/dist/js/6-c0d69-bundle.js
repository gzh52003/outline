(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{585:function(e,t,a){"use strict";a.r(t);a(301);var s,n=a(362),r=(a(134),a(73)),i=(a(567),a(579)),l=(a(581),a(578)),o=a(0),c=a.n(o),u=a(239),d=a(587),p=a(55),m=a(69);let h=Object(m.b)(e=>({currentUser:e.user}),e=>({updateUser(t){e({type:"update_user",user:t})}}))(s=class extends c.a.PureComponent{constructor(...e){super(...e),this.state={data:{}},this.follow=async()=>{const{data:e}=this.state,{currentUser:t,updateUser:a}=this.props,s=t.focus.some(t=>t===e._id);200===(await p.a.put(`iq/${e._id}/follow`,{userid:t._id,action:s?"del":"add"})).status&&a(s?{focus:t.focus.filter(t=>t!==e._id)}:{focus:[e._id,...t.focus]})}}async componentDidMount(){console.log(this.props);const{id:e}=this.props.match.params,t=await p.a.get("/iq/"+e);this.setState({data:t.data});const{status:a}=await p.a.get(`/iq/${e}/hot`);200===a&&this.setState({data:{...this.state.data,hot:this.state.data.hot+1}})}render(){const{data:e}=this.state,{currentUser:t}=this.props;return c.a.createElement("div",{style:{padding:15}},c.a.createElement("h1",null,e.question),c.a.createElement("div",null,e.user?c.a.createElement("span",null,c.a.createElement(l.a,{size:"small",style:{marginRight:5},icon:c.a.createElement(u.a,null)}),e.user.username):"",c.a.createElement("span",{style:{margin:"0 10px"}},"难度：",c.a.createElement(i.a,{value:e.difficulty,disabled:!0})),c.a.createElement("span",null,"浏览：",e.hot)," ",c.a.createElement(r.a,{type:"link",size:"small",icon:c.a.createElement(d.a,null),onClick:this.follow},t.focus.some(t=>t===e._id)?"取消":"收藏")),c.a.createElement(n.a.TextArea,{style:{height:100,marginBottom:10}}),c.a.createElement(r.a,{type:"primary",size:"large"},"添加答案"))}})||s;t.default=h}}]);